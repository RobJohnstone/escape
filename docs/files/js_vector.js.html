<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>js/vector.js - escape</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="../assets/favicon.png">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="../assets/css/logo.png" title="escape"></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 0.1.4-17</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="../classes/actorPrototype.html">actorPrototype</a></li>
            
                <li><a href="../classes/actors.html">actors</a></li>
            
                <li><a href="../classes/baddyPrototype.html">baddyPrototype</a></li>
            
                <li><a href="../classes/campaign.html">campaign</a></li>
            
                <li><a href="../classes/entities.html">entities</a></li>
            
                <li><a href="../classes/entityPrototype.html">entityPrototype</a></li>
            
                <li><a href="../classes/game.html">game</a></li>
            
                <li><a href="../classes/graphics.html">graphics</a></li>
            
                <li><a href="../classes/input.html">input</a></li>
            
                <li><a href="../classes/map.html">map</a></li>
            
                <li><a href="../classes/objectPrototype.html">objectPrototype</a></li>
            
                <li><a href="../classes/palette.html">palette</a></li>
            
                <li><a href="../classes/playerPrototype.html">playerPrototype</a></li>
            
                <li><a href="../classes/polyfills.html">polyfills</a></li>
            
                <li><a href="../classes/projectilePrototype.html">projectilePrototype</a></li>
            
                <li><a href="../classes/screen.html">screen</a></li>
            
                <li><a href="../classes/tiles.html">tiles</a></li>
            
                <li><a href="../classes/timer.html">timer</a></li>
            
                <li><a href="../classes/util.html">util</a></li>
            
                <li><a href="../classes/vector.html">vector</a></li>
            
                <li><a href="../classes/weapons.html">weapons</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
                <li><a href="../modules/actorPrototype.html">actorPrototype</a></li>
            
                <li><a href="../modules/actors.html">actors</a></li>
            
                <li><a href="../modules/baddyPrototype.html">baddyPrototype</a></li>
            
                <li><a href="../modules/campaign.html">campaign</a></li>
            
                <li><a href="../modules/entities.html">entities</a></li>
            
                <li><a href="../modules/game.html">game</a></li>
            
                <li><a href="../modules/graphics.html">graphics</a></li>
            
                <li><a href="../modules/input.html">input</a></li>
            
                <li><a href="../modules/map.html">map</a></li>
            
                <li><a href="../modules/objectPrototype.html">objectPrototype</a></li>
            
                <li><a href="../modules/palette.html">palette</a></li>
            
                <li><a href="../modules/playerPrototype.html">playerPrototype</a></li>
            
                <li><a href="../modules/polyfills.html">polyfills</a></li>
            
                <li><a href="../modules/projectilePrototype.html">projectilePrototype</a></li>
            
                <li><a href="../modules/screen.html">screen</a></li>
            
                <li><a href="../modules/tiles.html">tiles</a></li>
            
                <li><a href="../modules/timer.html">timer</a></li>
            
                <li><a href="../modules/util.html">util</a></li>
            
                <li><a href="../modules/vector.html">vector</a></li>
            
                <li><a href="../modules/weapons.html">weapons</a></li>
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: js/vector.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
/**
 * A library of useful vector math functions
 *
 * At first glance it may appear that a nicer syntax could be obtained by creating a vector type
 * and attaching these methods to the prototype. However, the most common use case is an object
 * of a different type that happens to have x and y properties. As using apply/call is fiddly
 * in terms of syntax and multiple inheritance is memory inefficient in javascript (an object can 
 * only be linked to a single prototype), I believe this approach to be best.
 *
 * @module vector
 * @class vector
 */

E.vector = (function() {
	&quot;use strict&quot;;

	var vector = {};

	/**
	 * returns a vector with integer values for both x and y coordinates
	 *
	 * This is particularly useful when rendering to the canvas where there is a big performance hit for non-integer values
	 *
	 * @method round
	 * @param v {vector} The vector to be rounded
	 * @return {vector} The new vector
	 */
	vector.round = function(v) {
		return {
			x: Math.round(v.x),
			y: Math.round(v.y)
		};
	};

	/**
	 * Adds two vectors together, returning the resulting vector
	 *
	 * @method add
	 * @param v1 {vector} A vector
	 * @param v2 {vector} A vector
	 * @return {vector} The resulting vector
	 */
	vector.add = function(v1, v2) {
		return {
			x: v1.x + v2.x,
			y: v1.y + v2.y
		};
	};

	/**
	 * Returns a new vector that is a copy of the inital vector
	 *
	 * @method clone
	 * @return {vector} The new vector
	 */
	vector.clone = function(v) {
		return vector.add(v, {x:0, y:0});
	};

	/**
	 * Subtracts one vector from another
	 *
	 * @method subtract
	 * @param v1 {vector} The vector to subtract
	 * @param v2 {vector} The vector to subtract from
	 * @return {vector} The resulting vector
	 */
	vector.subtract = function(v1, v2) {
		return {
			x: v2.x - v1.x,
			y: v2.y - v1.y
		};
	};

	/**
	 * Returns a vector of the same magnitude pointing in the opposite direction
	 *
	 * @method reverse
	 * @param v {vector} The initial vector
	 * @return {vector} The new vector
	 */
	vector.reverse = function(v) {
		return vector.subtract(v, {x:0, y:0});
	};

	/**
	 * Calculates the magnitude (length) of a vector
	 *
	 * @method mag
	 * @param v {vector} The vector
	 * @return {number} The magnitude
	 */
	vector.mag = function(v) {
		return Math.sqrt((v.x * v.x) + (v.y * v.y));
	};

	/**
	 * Calculates the distance between two vectors (imagine they represent points)
	 *
	 * @method distance
	 * @param v1 {vector} The first vector
	 * @param v2 {vector} The second vector
	 * @return {number} The distance between the two vectors
	 */
	vector.distance = function(v1, v2) {
		return vector.mag(vector.subtract(v1, v2));
	};

	/**
	 * Returns a new vector pointing the same direction but with length 1
	 *
	 * @method normalise
	 * @param v {vector} The vector to normalise
	 * @return {vector} The normalised vector
	 */
	vector.normalise = function(v) {
		var length = vector.mag(v) || 1;
		return {
			x: v.x / length,
			y: v.y / length
		};
	};

	/**
	 * Returns a new vector pointing in the same direction but of the specified length
	 *
	 * @method setLength
	 * @param v {vector} The intial vector
	 * @param length {number} The new length
	 * @return {vector} The new vector
	 */
	vector.setLength = function(v, length) {
		v = vector.normalise(v);
		return {
			x: v.x * length,
			y: v.y * length
		};
	};

	/**
	 * Calculates the dot product between two vectors
	 *
	 * This can be thought of as a number indicating how closely the two vectors are aligned
	 *
	 * @method dot
	 * @param v1 {vector} The first vector
	 * @param v2 {vector} The second vector
	 * @return {number} The dot product
	 */
	vector.dot = function(v1, v2) {
		return (v1.x * v2.x) + (v1.y * v2.y);
	};

	/**
	 * The angle between two vectors (in radians)
	 *
	 * @method angle
	 * @param v1 {vector} The first vector
	 * @param v2 {vector} The second vector
	 * @param dirMatters {boolean} If true then the angle is +ve for clockwise angles, -ve for anticlockwise. If false the angle is always positive
	 * @return {number} The angle (in radians)
	 */
	vector.angle = function(v1, v2, dirMatters) {
		if (v2 === undefined) {
			v2 = {x:0, y:-1};
		}
		v1 = vector.normalise(v1);
		v2 = vector.normalise(v2);
		if (dirMatters) {
			var v1Angle = Math.atan2(v1.y, v1.x),
				v2Angle = Math.atan2(v2.y, v2.x),
				result = v2Angle - v1Angle,
				abs = Math.abs(result);
			if (abs &gt; Math.PI) {
				result = result - (result/abs) * 2 * Math.PI;
			}
			return result;
		}
		else {
			return Math.acos(vector.dot(v1, v2));
		}
	};

	/**
	 * Converts an angle (in radians) to a normaLised vector
	 *
	 * @method angleToVector
	 * @param angle {number} The angle (directional and in radians) to convert
	 * @return {vector} The resulting normalised vector
	 */
	vector.angleToVector = function(angle) {
		return {
			x: Math.cos(angle),
			y: Math.sin(angle)
		};
	};

	return vector;
})();
    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
